# 案件主体信息展示与搜索增强需求文档

## 简介

本需求旨在增强智能案管系统中案件主体（原告、被告、第三人等当事人）信息的展示和检索能力。通过将主体信息整合到案件基本信息中，并在列表页面直接展示，同时支持批量导入和按当事人搜索，提升法务人员的工作效率和信息查找便利性。

## 术语表

- **案管系统**: 智能案管系统，法律案件管理平台
- **案件主体**: 参与案件的各方当事人，包括原告、被告、第三人等
- **当事人**: 案件主体的另一种称呼，指诉讼参与方
- **案件列表**: 显示所有案件概要信息的列表页面
- **案件基本信息**: 案件的核心信息，包括案号、案由、标的额等
- **批量导入**: 通过文件（如Excel、CSV）一次性导入多条数据的功能
- **搜索条件**: 用于筛选和查找数据的查询参数

## 需求

### 需求 1: 案件基本信息中整合主体信息

**用户故事:** 作为法务人员，我希望在案件基本信息中直接查看和管理主体信息，以便快速了解案件的诉讼各方。

#### 验收标准

1. WHEN 用户查看案件基本信息时，案管系统 SHALL 在基本信息区域展示所有案件主体列表
2. WHEN 用户创建案件时，案管系统 SHALL 在基本信息表单中提供主体信息录入功能
3. WHEN 用户录入主体信息时，案管系统 SHALL 要求填写主体类型（原告、被告、第三人）、主体名称、联系方式等必填字段
4. WHEN 用户保存案件时，案管系统 SHALL 同时保存案件基本信息和关联的主体信息
5. WHEN 用户编辑案件时，案管系统 SHALL 允许在基本信息页面直接添加、修改或删除主体信息

### 需求 2: 案件列表展示主体信息

**用户故事:** 作为法务人员，我希望在案件列表中直接看到主要当事人信息，以便快速识别和定位案件。

#### 验收标准

1. WHEN 用户查看案件列表时，案管系统 SHALL 在列表的每一行展示该案件的原告和被告名称
2. WHEN 案件存在多个原告或被告时，案管系统 SHALL 显示主要原告和主要被告，并标注总数量
3. WHEN 用户将鼠标悬停在主体名称上时，案管系统 SHALL 显示该主体的详细信息提示框
4. WHEN 列表数据加载时，案管系统 SHALL 同时加载案件基本信息和关联的主体信息
5. WHEN 用户点击主体名称时，案管系统 SHALL 跳转到该主体的详细档案页面

### 需求 3: 主体信息批量导入

**用户故事:** 作为法务人员，我希望能够批量导入案件主体信息，以便快速录入大量历史案件数据。

#### 验收标准

1. THE 案管系统 SHALL 支持通过Excel文件批量导入案件主体信息
2. THE 案管系统 SHALL 支持通过CSV文件批量导入案件主体信息
3. WHEN 用户上传导入文件时，案管系统 SHALL 验证文件格式和必填字段的完整性
4. WHEN 文件验证失败时，案管系统 SHALL 显示详细的错误信息，指出具体的错误行和字段
5. WHEN 导入数据存在重复时，案管系统 SHALL 提供选项让用户选择跳过或更新已有数据
6. WHEN 导入完成时，案管系统 SHALL 显示导入结果摘要，包括成功数量、失败数量和错误详情
7. THE 案管系统 SHALL 提供标准的导入模板文件供用户下载

### 需求 4: 按当事人搜索案件

**用户故事:** 作为法务人员，我希望能够按当事人名称搜索案件，以便快速找到特定主体相关的所有案件。

#### 验收标准

1. WHEN 用户访问案件列表页面时，案管系统 SHALL 在搜索区域提供"当事人"搜索字段
2. WHEN 用户在当事人字段输入关键词时，案管系统 SHALL 实时提供自动补全建议，显示匹配的主体名称
3. WHEN 用户选择或输入当事人名称后点击搜索时，案管系统 SHALL 返回所有包含该当事人的案件列表
4. WHEN 搜索结果展示时，案管系统 SHALL 高亮显示匹配的当事人名称
5. WHEN 用户组合多个搜索条件时，案管系统 SHALL 支持当事人搜索与案号、案由、日期等其他条件的联合查询
6. WHEN 用户清空搜索条件时，案管系统 SHALL 恢复显示完整的案件列表

### 需求 5: 主体信息数据完整性

**用户故事:** 作为系统管理员，我希望系统能够保证主体信息的数据完整性和一致性，以便维护数据质量。

#### 验收标准

1. WHEN 用户删除案件时，案管系统 SHALL 同时删除该案件关联的所有主体信息
2. WHEN 用户删除主体信息时，案管系统 SHALL 检查该主体是否被其他案件引用
3. WHEN 主体被多个案件引用时，案管系统 SHALL 仅删除当前案件的关联关系，保留主体档案
4. WHEN 用户修改主体信息时，案管系统 SHALL 记录修改历史，包括修改人、修改时间和修改内容
5. THE 案管系统 SHALL 确保主体类型字段只能选择预定义的值（原告、被告、第三人、代理律师等）

### 需求 6: 主体信息导出

**用户故事:** 作为法务人员，我希望能够导出案件主体信息，以便进行数据分析和报表制作。

#### 验收标准

1. WHEN 用户在案件列表页面点击导出时，案管系统 SHALL 提供选项导出包含主体信息的案件数据
2. THE 案管系统 SHALL 支持导出为Excel格式
3. THE 案管系统 SHALL 支持导出为CSV格式
4. WHEN 导出文件生成时，案管系统 SHALL 包含案件基本信息和所有关联的主体信息
5. WHEN 用户选择部分案件导出时，案管系统 SHALL 仅导出选中案件及其主体信息
6. WHEN 导出完成时，案管系统 SHALL 自动下载文件到用户本地

### 需求 7: 主体信息显示优化

**用户故事:** 作为法务人员，我希望主体信息的显示方式清晰易读，以便快速获取关键信息。

#### 验收标准

1. WHEN 案件列表展示主体信息时，案管系统 SHALL 使用不同的颜色或图标区分原告、被告、第三人
2. WHEN 主体名称过长时，案管系统 SHALL 自动截断并显示省略号，完整内容通过提示框展示
3. WHEN 案件存在多个同类型主体时，案管系统 SHALL 显示格式为"主体名称 等N人"
4. WHEN 用户查看案件详情时，案管系统 SHALL 按主体类型分组展示所有主体信息
5. THE 案管系统 SHALL 在主体信息旁边显示该主体的历史案件数量

### 需求 8: 主体信息快速录入

**用户故事:** 作为法务人员，我希望能够快速录入常见的主体信息，以便提高录入效率。

#### 验收标准

1. WHEN 用户录入主体名称时，案管系统 SHALL 从历史数据中提供自动补全建议
2. WHEN 用户选择历史主体时，案管系统 SHALL 自动填充该主体的联系方式、地址等信息
3. WHEN 用户录入企业主体时，案管系统 SHALL 支持通过统一社会信用代码自动查询企业信息
4. WHEN 用户添加多个同类型主体时，案管系统 SHALL 提供"添加另一个"快捷按钮
5. THE 案管系统 SHALL 保存用户最近录入的主体信息，提供快速选择功能
