<!DOCTYPE html>
<html>
<head>
  <title>测试助手API</title>
  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
</head>
<body>
  <h1>测试助手API</h1>
  <button onclick="testAPI()">测试API</button>
  <pre id="result"></pre>

  <script>
    async function testAPI() {
      const resultEl = document.getElementById('result');
      resultEl.textContent = '正在测试...\n';

      try {
        // 直接调用API
        const response = await axios.post('http://localhost:3000/api/assistant/chat', {
          message: '你好',
          context: {}
        });

        resultEl.textContent += '\n✅ 请求成功\n';
        resultEl.textContent += '\n完整响应:\n';
        resultEl.textContent += JSON.stringify(response, null, 2);
        resultEl.textContent += '\n\nresponse.data:\n';
        resultEl.textContent += JSON.stringify(response.data, null, 2);
        resultEl.textContent += '\n\nresponse.data.data:\n';
        resultEl.textContent += JSON.stringify(response.data.data, null, 2);
        resultEl.textContent += '\n\nresponse.data.data.message:\n';
        resultEl.textContent += response.data.data.message;
      } catch (error) {
        resultEl.textContent += '\n❌ 请求失败\n';
        resultEl.textContent += JSON.stringify(error.response?.data || error.message, null, 2);
      }
    }
  </script>
</body>
</html>
