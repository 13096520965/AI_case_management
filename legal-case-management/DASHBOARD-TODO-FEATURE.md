# 首页待办事项功能实现

## 功能说明

在首页的待办事项卡片中，显示提醒列表，实现以下功能：

### 主要特性

1. **首次加载20条数据**
   - 页面加载时自动获取前20条待办提醒
   - 显示提醒的内容、案件编号、时间等信息

2. **下滑刷新**
   - 当用户滚动到列表底部时，自动加载更多数据
   - 每次加载20条
   - 显示"下滑加载更多..."提示
   - 没有更多数据时显示"没有更多了"

3. **提醒优先级**
   - 高优先级（红色）：逾期提醒
   - 中优先级（橙色）：截止日期提醒
   - 低优先级（蓝色）：其他提醒

4. **交互功能**
   - 点击提醒项可跳转到对应案件详情
   - 点击时自动标记为已读并从列表移除
   - 显示未读提醒数量徽章
   - 手动刷新按钮

5. **时间显示**
   - 智能显示相对时间（刚刚、X分钟前、X小时前、昨天、X天前）
   - 超过7天显示具体日期

6. **数据同步**
   - 页面刷新：页面加载时自动获取最新数据
   - 手动刷新：点击刷新按钮立即更新
   - 实时更新：点击已读后立即更新列表和计数

## 技术实现

### 数据结构

```typescript
interface AlertItem {
  id: number
  type: string
  content: string
  caseId?: number
  caseNumber?: string
  status: string
  scheduledTime: string
  createdAt: string
}
```

### 核心功能

1. **loadAlertList(append)** - 加载提醒列表
   - append=false: 重新加载
   - append=true: 追加加载

2. **refreshAlertList()** - 刷新列表
   - 重置到第一页
   - 重新加载数据

3. **handleScroll** - 滚动事件处理
   - 检测滚动位置
   - 距离底部50px时触发加载

4. **handleAlertClick** - 点击事件处理
   - 标记为已读
   - 从列表移除
   - 更新计数
   - 跳转到案件详情

5. **formatTime** - 时间格式化
   - 相对时间显示

## 样式特性

- 自定义滚动条样式
- 悬停效果和动画
- 响应式设计
- 优先级颜色标识

## 使用的API

- `notificationApi.getNotifications()` - 获取提醒列表
- `notificationApi.markAsRead()` - 标记为已读

## 测试建议

1. 测试首次加载是否正确显示20条数据
2. 测试滚动加载是否正常工作
3. 测试点击跳转功能
4. 测试不同优先级的显示效果
5. 测试时间格式化是否正确
6. 测试手动刷新按钮
7. 测试点击已读后列表和计数的实时更新
8. 测试页面刷新后数据是否更新

## 性能优化

1. **防抖处理** - 滚动加载有loading状态保护，避免重复请求
2. **本地更新** - 点击已读后立即更新本地数据，无需等待服务器响应
3. **按需加载** - 首次只加载20条，滚动时才加载更多
4. **资源清理** - 组件卸载时清理事件监听器和图表实例
