# 标的处理详情功能

## ✅ 功能概述

标的处理详情功能用于管理案件的标的金额、收回情况、违约金、诉讼成本以及汇款记录等信息，帮助用户全面掌握案件的财务状况。

## 🎯 核心功能

### 1. 统计概览
在案件详情页面直接显示关键指标：
- **标的总额** - 案件涉及的总金额
- **已收回金额** - 已经收回的金额（基于已确认的汇款记录）
- **剩余金额** - 还需收回的金额
- **回收率** - 已收回金额占标的总额的百分比

### 2. 基本信息管理
- 标的总额
- 违约金
- 诉讼成本
- 成本承担方
- 备注信息

### 3. 汇款记录管理
- 添加汇款记录
- 编辑汇款记录
- 删除汇款记录
- 汇款状态跟踪（待汇款、已汇款、已确认）

## 📊 界面展示

### 概览卡片
```
┌─────────────────────────────────────────────────────────────┐
│ 💰 标的处理详情                            [查看详情]        │
├─────────────────────────────────────────────────────────────┤
│  标的总额        已收回         剩余          回收率         │
│  ¥100,000.00    ¥50,000.00    ¥50,000.00    50.00%        │
└─────────────────────────────────────────────────────────────┘
```

### 详情对话框

#### 基本信息标签页
```
┌─────────────────────────────────────────────────────────────┐
│ 标的处理详情                                                 │
├─────────────────────────────────────────────────────────────┤
│ [基本信息] [汇款记录]                                        │
│                                                             │
│ 标的总额：    [100000.00_____________]                      │
│ 违约金：      [5000.00_______________]                      │
│                                                             │
│ 诉讼成本：    [3000.00_______________]                      │
│ 成本承担方：  [被告_________________]                       │
│                                                             │
│ 备注：        [_____________________]                       │
│              [_____________________]                       │
│              [_____________________]                       │
│                                                             │
│ [保存基本信息]                                              │
└─────────────────────────────────────────────────────────────┘
```

#### 汇款记录标签页
```
┌─────────────────────────────────────────────────────────────┐
│ 标的处理详情                                                 │
├─────────────────────────────────────────────────────────────┤
│ [基本信息] [汇款记录]                                        │
│                                                             │
│ [+ 添加汇款记录]                                            │
│                                                             │
│ ┌───┬──────────┬───────────┬────────┬────────┬──────┬────┐ │
│ │ # │汇款日期  │ 金额      │付款方  │收款方  │状态  │操作│ │
│ ├───┼──────────┼───────────┼────────┼────────┼──────┼────┤ │
│ │ 1 │2024-11-15│¥50,000.00 │被告公司│原告公司│已确认│编辑│ │
│ │ 2 │2024-11-20│¥30,000.00 │被告公司│原告公司│待汇款│编辑│ │
│ └───┴──────────┴───────────┴────────┴────────┴──────┴────┘ │
└─────────────────────────────────────────────────────────────┘
```

## 💡 功能特点

### 1. 自动计算
- **已收回金额** - 自动汇总所有"已确认"状态的汇款记录
- **剩余金额** - 自动计算：标的总额 - 已收回金额
- **回收率** - 自动计算：(已收回金额 / 标的总额) × 100%

### 2. 状态管理
汇款记录支持三种状态：
- **待汇款** - 计划中的汇款，未实际发生
- **已汇款** - 已经汇出，等待确认
- **已确认** - 已确认收到，计入已收回金额

### 3. 数据验证
- 所有金额字段支持小数点后2位
- 必填字段验证
- 日期格式验证

## 🔧 使用说明

### 查看标的处理详情
1. 进入案件详情页面
2. 在"标的处理详情"卡片中查看概览数据
3. 点击"查看详情"按钮打开详情对话框

### 编辑基本信息
1. 在详情对话框中，确保在"基本信息"标签页
2. 修改标的总额、违约金、诉讼成本等信息
3. 填写成本承担方和备注
4. 点击"保存基本信息"按钮

### 添加汇款记录
1. 切换到"汇款记录"标签页
2. 点击"添加汇款记录"按钮
3. 填写汇款信息：
   - 汇款日期
   - 汇款金额
   - 付款方
   - 收款方
   - 支付方式（银行转账/现金/支票/其他）
   - 状态（待汇款/已汇款/已确认）
   - 备注
4. 点击"保存"按钮

### 编辑汇款记录
1. 在汇款记录列表中找到要编辑的记录
2. 点击"编辑"按钮
3. 修改信息后点击"保存"

### 删除汇款记录
1. 在汇款记录列表中找到要删除的记录
2. 点击"删除"按钮
3. 确认删除操作

## 📋 数据字段说明

### 基本信息
| 字段 | 类型 | 必填 | 说明 |
|------|------|------|------|
| 标的总额 | 数字 | 否 | 案件涉及的总金额 |
| 违约金 | 数字 | 否 | 违约金金额 |
| 诉讼成本 | 数字 | 否 | 诉讼相关费用 |
| 成本承担方 | 文本 | 否 | 承担诉讼成本的一方 |
| 备注 | 文本 | 否 | 其他说明信息 |

### 汇款记录
| 字段 | 类型 | 必填 | 说明 |
|------|------|------|------|
| 汇款日期 | 日期 | 是 | 汇款发生的日期 |
| 汇款金额 | 数字 | 是 | 汇款金额 |
| 付款方 | 文本 | 是 | 付款方名称 |
| 收款方 | 文本 | 是 | 收款方名称 |
| 支付方式 | 选择 | 是 | 银行转账/现金/支票/其他 |
| 状态 | 选择 | 是 | 待汇款/已汇款/已确认 |
| 备注 | 文本 | 否 | 备注信息 |

## 🎨 视觉设计

### 颜色标识
- **标的总额** - 蓝色 (#409eff)
- **已收回金额** - 绿色 (#67c23a)
- **剩余金额** - 橙色 (#e6a23c)
- **回收率** - 灰色 (#909399)

### 状态标签
- **待汇款** - 橙色警告标签
- **已汇款** - 蓝色信息标签
- **已确认** - 绿色成功标签

## 📱 响应式设计

组件支持不同屏幕尺寸：
- 概览卡片使用栅格布局，自动适应
- 详情对话框宽度1200px，在小屏幕上自动调整
- 表格支持横向滚动

## 🔍 应用场景

### 1. 案件执行跟踪
- 记录每一笔款项的收回情况
- 实时了解案件执行进度
- 计算回收率评估执行效果

### 2. 财务管理
- 统计案件相关的所有费用
- 明确成本承担方
- 便于财务对账

### 3. 报告生成
- 提供完整的财务数据
- 支持导出用于报告
- 便于向客户汇报

## 📋 相关文件

| 文件 | 说明 |
|------|------|
| `frontend/src/components/case/TargetAmountDetail.vue` | 标的处理详情组件 |
| `frontend/src/views/case/CaseDetail.vue` | 案件详情页面（已集成） |

## 🚀 后续优化建议

### 1. 数据持久化
当前数据存储在组件内存中，需要：
- 创建后端API接口
- 实现数据库存储
- 添加数据加载和保存逻辑

### 2. 高级功能
- 支持附件上传（汇款凭证）
- 汇款记录导出（Excel/PDF）
- 自动提醒待汇款项
- 汇款统计图表

### 3. 权限控制
- 只读模式支持
- 按角色控制编辑权限
- 操作日志记录

## ✨ 测试数据

组件包含示例数据，可以直接测试：
- 标的总额：¥100,000.00
- 违约金：¥5,000.00
- 诉讼成本：¥3,000.00
- 2条汇款记录（1条已确认，1条待汇款）

现在刷新浏览器，进入案件详情页面，就能看到标的处理详情功能了！🎉
